<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SOAR TN Request Portal</title>

<!-- EmailJS v4 -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
emailjs.init("YOUR_PUBLIC_KEY"); // replace with your EmailJS public key
</script>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  min-height:100vh;
  background:linear-gradient(-45deg,#eef3ff,#fdfbfb,#e0f7fa,#fce4ec);
  background-size:400% 400%;
  animation:bgMove 15s ease infinite;
  overflow-x:hidden;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

#landingFrame {
  max-width:900px;
  margin:50px auto;
  padding:40px;
  border-radius:25px;
  border:6px solid transparent;
  border-image:linear-gradient(90deg,#00c853,#69f0ae,#00c853) 1;
  text-align:center;
  background:rgba(255,255,255,0.55);
  position:relative;
  z-index:1;
}

button {
  padding:14px 22px;
  margin:10px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#0078D4;
  color:#fff;
  cursor:pointer;
}
button:hover{background:#005A9E}

.modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  justify-content:center;
  align-items:center;
  z-index:100;
}
.modal-content {
  background:#fff;
  padding:25px;
  border-radius:10px;
  width:90%;
  max-width:520px;
}
input, select, textarea {
  width:100%;
  padding:10px;
  margin-bottom:12px;
  border-radius:6px;
  border:1px solid #ccc;
}

/* Branding at bottom */
#branding {
  margin-top:25px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
}
.brand-text {
  font-size:48px;
  font-weight:bold;
  background:linear-gradient(270deg,red,orange,yellow,green,blue,indigo,violet);
  background-size:800% 800%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:rainbowMove 8s linear infinite;
}
@keyframes rainbowMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
#logo {
  width:80px;
  height:auto;
}
</style>
</head>

<body>

<div id="landingFrame">
  <h2>SOAR TN Request Portal</h2>
  <button onclick="openModal('maintenance')">Maintenance</button>
  <button onclick="openModal('service')">Service Request</button>
  <button onclick="openModal('expense')">Expense Request</button>
  <button onclick="openModal('ot')">OT Request</button>
</div>

<div id="branding">
  <div class="brand-text">SOAR</div>
  <img src="logo.png" id="logo" alt="SOAR Logo">
  <div class="brand-text">TN</div>
</div>

<!-- ================= MODALS ================= -->

<!-- Maintenance -->
<div id="maintenance" class="modal">
<div class="modal-content">
<h3>Maintenance Request</h3>
<input id="mName" placeholder="Requested By">
<input id="mPhone" placeholder="Phone">
<select id="mHouse">
<option value="">Residential House</option>
<option>Lee House</option><option>Alcoa House</option><option>Cusick House</option>
<option>Countryside House</option><option>Cherokee House</option><option>Dell House</option>
<option>Gladstone House</option><option>Glascock House</option><option>Jett House</option>
<option>May House</option><option>Merritt House</option><option>Emma House</option>
<option>Wright House</option><option>Raulston House</option><option>Louisville House</option>
</select>
<input type="date" id="mExpected">
<textarea id="mDesc" placeholder="Description of Work"></textarea>
<textarea id="mMaterials" placeholder="Materials Required"></textarea>
<button onclick="submitMaintenance()">Submit</button>
<button onclick="closeAll()">Cancel</button>
</div>
</div>

<!-- Service Request -->
<div id="service" class="modal">
<div class="modal-content">
<h3>Service Request</h3>
<input id="sName" placeholder="Your Name">
<input id="sEmail" placeholder="Your Email">
<select id="sDept">
<option value="">Department</option>
<option value="medical">Medical</option>
<option value="program">Program Directors</option>
<option value="finance">Finance</option>
<option value="compliance">Compliance</option>
<option value="payroll">Payroll</option>
<option value="it">IT</option>
<option value="recruiting">Recruiting</option>
<option value="hr">HR</option>
<option value="other">Other</option>
</select>
<textarea id="sDesc" placeholder="Description"></textarea>
<button onclick="submitService()">Submit</button>
<button onclick="closeAll()">Cancel</button>
</div>
</div>

<!-- Expense Request -->
<div id="expense" class="modal">
<div class="modal-content">
<h3>Expense Request</h3>
<input id="eName" placeholder="Your Name">
<input id="eAmount" placeholder="Amount">
<input id="eVendor" placeholder="Vendor">
<textarea id="eDesc" placeholder="Expense Description"></textarea>
<button onclick="submitExpense()">Submit</button>
<button onclick="closeAll()">Cancel</button>
</div>
</div>

<!-- OT Request -->
<div id="ot" class="modal">
<div class="modal-content">
<h3>OT Request</h3>
<input id="otHM" placeholder="House Manager Name">
<input id="otHMEmail" placeholder="House Manager Email">
<input id="otEmp" placeholder="Employee Working OT">
<input type="date" id="otDate">
<input id="otHours" placeholder="Total Hours">
<textarea id="otReason" placeholder="Reason for OT"></textarea>
<button onclick="submitOT()">Submit</button>
<button onclick="closeAll()">Cancel</button>
</div>
</div>

<script>
// Modal handling
function openModal(id){document.getElementById(id).style.display='flex'}
function closeAll(){document.querySelectorAll('.modal').forEach(m=>m.style.display='none')}

// Ticket number generator
function ticket(){return "SOAR-"+Date.now()}

// Confetti
function confettiFire(){confetti({particleCount:150,spread:80,origin:{y:0.6}})}

// ================== SUBMISSIONS ==================

function submitMaintenance(){
const t=ticket();
emailjs.send("YOUR_SERVICE_ID","TEMPLATE_MAINTENANCE",{
ticket:t,
name:mName.value,
house:mHouse.value,
desc:mDesc.value,
materials:mMaterials.value,
to_email:"soarhr@soartn.org",
cc_email:"cherylhintz@soartn.org,alishasanders@soartn.org,kobypresley@soartn.org"
});
generatePDF(t);
confettiFire();closeAll();
alert("Maintenance request submitted! Ticket #: "+t);
}

function submitService(){
const t=ticket();
emailjs.send("YOUR_SERVICE_ID","TEMPLATE_SERVICE",{ticket:t});
confettiFire();closeAll();
alert("Service request submitted! Ticket #: "+t);
}

function submitExpense(){
const t=ticket();
emailjs.send("YOUR_SERVICE_ID","TEMPLATE_EXPENSE",{ticket:t});
confettiFire();closeAll();
alert("Expense request submitted! Ticket #: "+t);
}

function submitOT(){
const t=ticket();
emailjs.send("YOUR_SERVICE_ID","TEMPLATE_OT",{ticket:t});
confettiFire();closeAll();
alert("OT request submitted! Ticket #: "+t);
}

// ================= PDF =================
function generatePDF(ticket){
const {jsPDF}=window.jspdf;
const pdf=new jsPDF();
pdf.text("SOAR TN Maintenance Request",20,20);
pdf.text("Ticket: "+ticket,20,30);
pdf.text("Requested By: "+mName.value,20,40);
pdf.text("House: "+mHouse.value,20,50);
pdf.text("Phone: "+mPhone.value,20,60);
pdf.text("Expected Date: "+mExpected.value,20,70);
pdf.text("Description: "+mDesc.value,20,80);
pdf.text("Materials: "+mMaterials.value,20,90);
pdf.save(ticket+".pdf");
}
</script>

</body>
</html>
